"use strict";(self.webpackChunkbaden_baden=self.webpackChunkbaden_baden||[]).push([[504],{53016:(e,i,t)=>{t.d(i,{Z:()=>a});t(72791);var l=t(2409),s=t(49389),r=t(80184);const a=e=>{let{label:i,name:t,required:a,required_text:n,warning:u}=e;return(0,r.jsx)(l.Z.Item,{label:u?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:i}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{children:u})]}):(0,r.jsx)("div",{children:i}),name:t,rules:[{required:a,message:n}],children:(0,r.jsx)(s.default,{})})}},63159:(e,i,t)=>{t.d(i,{Z:()=>a});t(72791);var l=t(2409),s=t(13344),r=t(80184);const a=e=>{let{label:i,name:t,required:a,required_text:n}=e;return(0,r.jsx)(l.Z.Item,{label:i,name:t,rules:[{required:a,message:n}],children:(0,r.jsx)(s.Z,{style:{width:"100%"}})})}},83386:(e,i,t)=>{t.d(i,{Z:()=>a});t(72791);var l=t(2409),s=t(66920),r=t(80184);const a=e=>{let{label:i,name:t,required:a,required_text:n}=e;return(0,r.jsx)(l.Z.Item,{label:i,name:t,rules:[{required:a,message:n}],children:(0,r.jsx)(s.Z,{rows:4})})}},14504:(e,i,t)=>{t.r(i),t.d(i,{default:()=>S});var l=t(72791),s=t(521),r=t(2409),a=t(50419),n=t(66106),u=t(30914),d=t(87309),o=t(93086),c=t(91933),m=t(27169),_=t(72018),x=t(57689),p=t(16030),v=t(68117),h=t(77221),g=t(53016),b=t(83386),Z=t(63159),j=t(68747),f=t(80184);const{Title:q}=s.default,y={title_uz:"",title_ru:"",title_en:"",sub_title_ru:"",sub_title_uz:"",sub_title_en:"",text_ru:"",text_uz:"",text_en:"",price:null,capacity:null,num_people:"",num_bedrooms:null,included_facilities:[{title_ru:"",title_uz:"",title_en:""}],image_ids:[],index_image:[]},S=()=>{const[e]=r.Z.useForm(),i=(0,x.s0)(),{editId:t}=(0,p.v9)((e=>e.editData)),s=(0,p.I0)(),[S,z]=(0,l.useState)([]),[F,w]=(0,l.useState)([]),[k,I]=(0,l.useState)(""),{mutate:E,data:D,isLoading:C,isSuccess:L}=(0,c.useMutation)((e=>{let{url:i,formData:t}=e;return m.Z.postData(i,t)}),{onSuccess:()=>{a.ZP.success("Success")},onError:e=>{for(let i in e.response.data)a.ZP.error("".concat(i,": ").concat(e.response.data[i][0]))}}),{mutate:P,data:V,isLoading:T,isSuccess:U}=(0,c.useMutation)((e=>{let{url:i,data:t}=e;return m.Z.postData(i,t)}),{onSuccess:()=>{a.ZP.success("Success")},onError:e=>{for(let i in e.response.data)a.ZP.error("".concat(i,": ").concat(e.response.data[i][0]))}}),{isLoading:R,data:M,refetch:O,isSuccess:A}=(0,c.useQuery)(["edit-rooms",t],(()=>m.Z.getDataByID("/rooms",t)),{enabled:!1}),{mutate:Q,isLoading:B,data:J,isSuccess:N}=(0,c.useMutation)((e=>{let{url:i,data:t,id:l}=e;return m.Z.editData(i,t,l)}),{onSuccess:()=>{a.ZP.success("Success")},onError:e=>{for(let i in e.response.data)a.ZP.error("".concat(i,": ").concat(e.response.data[i][0]))}}),{mutate:X}=(0,c.useMutation)((e=>{let{url:i,ids:t}=e;return m.Z.deleteImages(i,t)}),{onSuccess:()=>a.ZP.success("Success"),onError:e=>a.ZP.error(e.message)});(0,l.useEffect)((()=>{N&&s({type:h.Pb,payload:""}),(U||N)&&i("/rooms")}),[V,J]),(0,l.useEffect)((()=>{""!==t&&O()}),[t]),(0,l.useEffect)((()=>{""===t&&e.setFieldsValue(y)}),[]),(0,l.useEffect)((()=>{const i=[];let t=[];var l,s,r;void 0!==M&&(M.images.map((e=>{const t={uid:e.id,name:e.id,status:"done",url:e.image};i.push(t)})),t=[{uid:null===M||void 0===M||null===(l=M.index_image)||void 0===l?void 0:l.id,name:null===M||void 0===M||null===(s=M.index_image)||void 0===s?void 0:s.id,status:"done",url:null===M||void 0===M||null===(r=M.index_image)||void 0===r?void 0:r.image}]);if(A){const l={title_uz:null===M||void 0===M?void 0:M.title_uz,title_ru:null===M||void 0===M?void 0:M.title_ru,title_en:null===M||void 0===M?void 0:M.title_en,sub_title_ru:null===M||void 0===M?void 0:M.sub_title_ru,sub_title_uz:null===M||void 0===M?void 0:M.sub_title_uz,sub_title_en:null===M||void 0===M?void 0:M.sub_title_en,text_ru:null===M||void 0===M?void 0:M.text_ru,text_uz:null===M||void 0===M?void 0:M.text_uz,text_en:null===M||void 0===M?void 0:M.text_en,price:null===M||void 0===M?void 0:M.price,capacity:null===M||void 0===M?void 0:M.capacity,num_people:null===M||void 0===M?void 0:M.num_people,num_bedrooms:null===M||void 0===M?void 0:M.num_bedrooms,included_facilities:null===M||void 0===M?void 0:M.included_facilities,image_ids:i,index_image:t};z(i),w(t),e.setFieldsValue(l)}}),[M]);(0,l.useEffect)((()=>{const i=JSON.parse(localStorage.getItem("myFormValues"));i&&(i.images=[],e.setFieldsValue(i));const t=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",t),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",t)}}),[]),(0,l.useEffect)((()=>{if(L&&"images"===k){var i,t,l;const s=[...S],r={uid:null===D||void 0===D||null===(i=D.images[0])||void 0===i?void 0:i.id,name:null===D||void 0===D||null===(t=D.images[0])||void 0===t?void 0:t.id,status:"done",url:null===D||void 0===D||null===(l=D.images[0])||void 0===l?void 0:l.url};s.push(r),e.setFieldsValue({image_ids:[r]}),z(s),I("")}if(L&&"indexImage"===k){var s,r,a;const i=[...F],t={uid:null===D||void 0===D||null===(s=D.images[0])||void 0===s?void 0:s.id,name:null===D||void 0===D||null===(r=D.images[0])||void 0===r?void 0:r.id,status:"done",url:null===D||void 0===D||null===(a=D.images[0])||void 0===a?void 0:a.url};i.push(t),e.setFieldsValue({index_image:[t]}),w(i),I("")}}),[D]);const H=async e=>{let i=e.url;i||(i=await new Promise((i=>{const t=new FileReader;t.readAsDataURL(e.originFileObj),t.onload=()=>i(t.result)})));const t=new Image;t.src=i;const l=window.open(i);null===l||void 0===l||l.document.write(t.outerHTML)};return(0,f.jsx)("div",{children:T||R||B||C?(0,f.jsx)(_.QP,{}):(0,f.jsxs)(r.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:y,onFinish:e=>{var i;const l=[],s=[];S.map((e=>{l.push(e.uid)})),F.map((e=>{s.push(e.uid)}));const r={image_ids:l,index_image:null===(i=F[0])||void 0===i?void 0:i.uid,title_uz:e.title_uz,title_ru:e.title_ru,title_en:e.title_en,sub_title_uz:e.sub_title_uz,sub_title_ru:e.sub_title_ru,sub_title_en:e.sub_title_en,text_ru:e.text_ru,text_uz:e.text_uz,text_en:e.text_en,price:e.price,capacity:e.capacity,num_people:e.num_people,num_bedrooms:e.num_bedrooms,included_facilities:e.included_facilities};A?Q({url:"/rooms",data:r,id:t}):P({url:"/rooms/",data:r})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(u.Z,{span:24,children:(0,f.jsx)(g.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"title_ru"})}),(0,f.jsx)(u.Z,{span:24,children:(0,f.jsx)(g.Z,{required:!0,required_text:"Sarlavha kiritish kerak",label:"Sarlavha Uz",name:"title_uz"})}),(0,f.jsx)(u.Z,{span:24,children:(0,f.jsx)(g.Z,{required:!0,required_text:"A title is required",label:"Title En",name:"title_en"})})]}),(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(u.Z,{span:24,children:(0,f.jsx)(g.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043f\u043e\u0434\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u041f\u043e\u0434\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"sub_title_ru"})}),(0,f.jsx)(u.Z,{span:24,children:(0,f.jsx)(g.Z,{required:!0,required_text:"Qo'shimcha Sarlavha kiritish kerak",label:"Qo'shimcha Sarlavha Uz",name:"sub_title_uz"})}),(0,f.jsx)(u.Z,{span:24,children:(0,f.jsx)(g.Z,{required:!0,required_text:"A sub title is required",label:"Sub Title En",name:"sub_title_en"})})]}),(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(u.Z,{span:12,children:(0,f.jsx)(Z.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0446\u0435\u043d\u0430  \u043a\u043e\u043c\u043d\u0430\u0442\u044b",label:"\u0426\u0435\u043d\u0430 \u043a\u043e\u043c\u043d\u0430\u0442\u044b",name:"price"})}),(0,f.jsx)(u.Z,{span:12,children:(0,f.jsx)(Z.Z,{required:!0,required_text:"\u0427\u0435\u043b\u043e\u0432\u0435\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c",label:"\u0427\u0435\u043b\u043e\u0432\u0435\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b",name:"capacity"})}),(0,f.jsx)(u.Z,{span:12,children:(0,f.jsx)(Z.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0438.",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044e\u0434\u0438",name:"num_people"})}),(0,f.jsx)(u.Z,{span:12,children:(0,f.jsx)(Z.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0430\u043d\u043d\u044b\u0445 \u043a\u043e\u043c\u043d\u0430\u0442.",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043f\u0430\u043b\u044c\u043d\u0438 \u043a\u043e\u043c\u043d\u0430\u0442",name:"num_bedrooms"})})]}),(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(u.Z,{span:24,children:(0,f.jsx)(b.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 Ru",name:"text_ru"})}),(0,f.jsx)(u.Z,{span:24,children:(0,f.jsx)(b.Z,{required:!0,required_text:"Tavsif kiritish kerak",label:"Tavsif Uz",name:"text_uz"})}),(0,f.jsx)(u.Z,{span:24,children:(0,f.jsx)(b.Z,{required:!0,required_text:"A description is required",label:"Description En",name:"text_en"})})]}),(0,f.jsx)(q,{level:3,children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043d\u043e\u043c\u0435\u0440\u0430"}),(0,f.jsx)(r.Z.List,{name:"included_facilities",children:(e,i)=>{let{add:t,remove:l}=i;return(0,f.jsxs)(f.Fragment,{children:[e.map(((e,i)=>(0,f.jsxs)("div",{style:{marginBottom:20},children:[(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(u.Z,{span:8,children:(0,f.jsx)(g.Z,{required:!0,required_text:"\u0414\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u0444\u0443\u043d\u043a\u0446\u0438\u0438",label:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 Ru ".concat(i+1),name:[e.name,"title_ru"]})}),(0,f.jsx)(u.Z,{span:8,children:(0,f.jsx)(g.Z,{required:!0,required_text:"Xususiyatlari kiritish kerak",label:"Xususiyatlari Uz ".concat(i+1),name:[e.name,"title_uz"]})}),(0,f.jsx)(u.Z,{span:8,children:(0,f.jsx)(g.Z,{required:!0,required_text:"Features must be included",label:"Characteristics En ".concat(i+1),name:[e.name,"title_en"]})})]}),(0,f.jsx)(j.Z,{onClick:()=>l(e.name)})]},e.fieldKey))),(0,f.jsx)(r.Z.Item,{children:(0,f.jsx)(d.Z,{type:"primary",onClick:()=>t(),block:!0,style:{backgroundColor:"#28a745"},children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b \u0434\u043b\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430"})})]})}}),(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(u.Z,{span:12,children:(0,f.jsx)(r.Z.Item,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",name:"image_ids",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}],children:(0,f.jsx)(v.Z,{children:(0,f.jsx)(o.Z,{maxCount:4,fileList:S,listType:"picture-card",onChange:e=>{let{fileList:i}=e;if(i.length<S.length)return;const t=new FormData;0!==i.length&&(t.append("uploaded_images",i[i.length-1].originFileObj),E({url:"/about/images/",formData:t}),I("images"))},onPreview:H,onRemove:i=>{const t=[];S.map((e=>{(null===e||void 0===e?void 0:e.uid)!==(null===i||void 0===i?void 0:i.uid)&&t.push(e)})),!t.length>0&&e.setFieldsValue({image_ids:[]});const l={image_ids:[null===i||void 0===i?void 0:i.uid]};X({url:"/about/images/delete",ids:l}),z(t)},beforeUpload:()=>!1,children:S.length>3?"":"Upload"})})})}),(0,f.jsx)(u.Z,{span:12,children:(0,f.jsx)(r.Z.Item,{label:"\u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",name:"index_image",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}],children:(0,f.jsx)(v.Z,{children:(0,f.jsx)(o.Z,{maxCount:1,fileList:F,listType:"picture-card",onChange:e=>{let{fileList:i}=e;if(i.length<F.length)return;const t=new FormData;0!==i.length&&(t.append("uploaded_images",i[i.length-1].originFileObj),E({url:"/about/images/",formData:t}),I("indexImage"))},onPreview:H,onRemove:i=>{const t={image_ids:[null===i||void 0===i?void 0:i.uid]};X({url:"/about/images/delete",ids:t}),w([]),e.setFieldsValue({index_image:[]})},beforeUpload:()=>!1,children:F.length>0?"":"Upload"})})})})]}),(0,f.jsx)(d.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:A?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})})}}}]);
//# sourceMappingURL=504.ff1750ce.chunk.js.map