"use strict";(self.webpackChunkbaden_baden=self.webpackChunkbaden_baden||[]).push([[507],{53016:(e,t,i)=>{i.d(t,{Z:()=>s});i(72791);var r=i(2409),a=i(49389),n=i(80184);const s=e=>{let{label:t,name:i,required:s,required_text:l,warning:d}=e;return(0,n.jsx)(r.Z.Item,{label:d?(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:t}),(0,n.jsx)("br",{}),(0,n.jsx)("p",{children:d})]}):(0,n.jsx)("div",{children:t}),name:i,rules:[{required:s,message:l}],children:(0,n.jsx)(a.default,{})})}},83386:(e,t,i)=>{i.d(t,{Z:()=>s});i(72791);var r=i(2409),a=i(66920),n=i(80184);const s=e=>{let{label:t,name:i,required:s,required_text:l}=e;return(0,n.jsx)(r.Z.Item,{label:t,name:i,rules:[{required:s,message:l}],children:(0,n.jsx)(a.Z,{rows:4})})}},17507:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var r=i(72791),a=i(2409),n=i(50419),s=i(66106),l=i(30914),d=i(49389),u=i(93086),o=i(87309),c=i(91933),x=i(27169),m=i(72018),p=i(57689),_=i(16030),h=i(68117),v=i(77221),j=i(53016),Z=i(83386),g=i(80184);const b={image:[],title_uz:"",title_ru:"",title_en:"",text_ru:"",text_uz:"",text_en:"",link:""},f=()=>{const[e]=a.Z.useForm(),t=(0,p.s0)(),{editId:i}=(0,_.v9)((e=>e.editData)),f=(0,_.I0)(),[w,q]=(0,r.useState)([]),{mutate:k,data:F,isLoading:S,isSuccess:y}=(0,c.useMutation)((e=>{let{url:t,data:i}=e;return x.Z.postData(t,i)}),{onSuccess:()=>{n.ZP.success("Success")},onError:e=>{for(let t in e.response.data)n.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}}),{isLoading:z,data:I,refetch:E,isSuccess:D}=(0,c.useQuery)(["edit-news",i],(()=>x.Z.getDataByID("/about/news",i)),{enabled:!1}),{mutate:L,isLoading:V,data:P,isSuccess:C}=(0,c.useMutation)((e=>{let{url:t,data:i,id:r}=e;return x.Z.editData(t,i,r)}),{onSuccess:()=>{n.ZP.success("Success")},onError:e=>{for(let t in e.response.data)n.ZP.error("".concat(t,": ").concat(e.response.data[t][0]))}});(0,r.useEffect)((()=>{C&&f({type:v.Pb,payload:""}),(y||C)&&t("/news")}),[F,P]),(0,r.useEffect)((()=>{""!==i&&E()}),[i]),(0,r.useEffect)((()=>{""===i&&e.setFieldsValue(b)}),[]),(0,r.useEffect)((()=>{const t=[{uid:null===I||void 0===I?void 0:I.id,name:null===I||void 0===I?void 0:I.id,status:"done",url:null===I||void 0===I?void 0:I.image}];if(D){const i={title_uz:null===I||void 0===I?void 0:I.title_uz,title_ru:null===I||void 0===I?void 0:I.title_ru,title_en:null===I||void 0===I?void 0:I.title_en,text_ru:null===I||void 0===I?void 0:I.text_ru,text_uz:null===I||void 0===I?void 0:I.text_uz,text_en:null===I||void 0===I?void 0:I.text_en,link:I.link.split("//")[1],image:t};q(t),e.setFieldsValue(i)}}),[I]);(0,r.useEffect)((()=>{const t=JSON.parse(localStorage.getItem("myFormValues"));t&&(t.images=[],e.setFieldsValue(t));const i=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",i),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",i)}}),[]);return(0,g.jsx)("div",{children:S||z||V?(0,g.jsx)(m.QP,{}):(0,g.jsxs)(a.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:b,onFinish:e=>{var t;const r=new FormData;var a;(r.append("title_ru",e.title_ru),r.append("title_uz",e.title_uz),r.append("title_en",e.title_en),r.append("text_ru",e.text_ru),r.append("text_uz",e.text_uz),r.append("text_en",e.text_en),r.append("link","https://".concat(e.link)),null!==(t=w[0])&&void 0!==t&&t.originFileObj)&&r.append("image",null===(a=w[0])||void 0===a?void 0:a.originFileObj);D?L({url:"/about/news",data:r,id:i}):k({url:"/about/news/",data:r})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,g.jsxs)(s.Z,{gutter:20,children:[(0,g.jsx)(l.Z,{span:24,children:(0,g.jsx)(j.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"title_ru"})}),(0,g.jsx)(l.Z,{span:24,children:(0,g.jsx)(j.Z,{required:!0,required_text:"Sarlavha kiritish kerak",label:"Sarlavha Uz",name:"title_uz"})}),(0,g.jsx)(l.Z,{span:24,children:(0,g.jsx)(j.Z,{required:!0,required_text:"A title is required",label:"Title En",name:"title_en"})})]}),(0,g.jsxs)(s.Z,{gutter:20,children:[(0,g.jsx)(l.Z,{span:24,children:(0,g.jsx)(Z.Z,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 Ru",name:"text_ru"})}),(0,g.jsx)(l.Z,{span:24,children:(0,g.jsx)(Z.Z,{required:!0,required_text:"Tavsif kiritish kerak",label:"Tavsif Uz",name:"text_uz"})}),(0,g.jsx)(l.Z,{span:24,children:(0,g.jsx)(Z.Z,{required:!0,required_text:"A description is required",label:"Description En",name:"text_en"})})]}),(0,g.jsxs)(s.Z,{gutter:20,children:[(0,g.jsx)(l.Z,{span:12,children:(0,g.jsx)(a.Z.Item,{label:"News link",name:"link",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f link"}],children:(0,g.jsx)(d.default,{addonBefore:"https://"})})}),(0,g.jsx)(l.Z,{span:12,children:(0,g.jsx)(a.Z.Item,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",name:"image",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}],children:(0,g.jsx)(h.Z,{children:(0,g.jsx)(u.Z,{maxCount:1,fileList:w,listType:"picture-card",onChange:t=>{let{fileList:i}=t;q(i),e.setFieldsValue({image:i})},onPreview:async e=>{let t=e.url;t||(t=await new Promise((t=>{const i=new FileReader;i.readAsDataURL(e.originFileObj),i.onload=()=>t(i.result)})));const i=new Image;i.src=t;const r=window.open(t);null===r||void 0===r||r.document.write(i.outerHTML)},beforeUpload:()=>!1,children:w.length>0?"":"Upload"})})})})]}),(0,g.jsx)(o.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:D?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})})}}}]);
//# sourceMappingURL=507.6ecf7d43.chunk.js.map