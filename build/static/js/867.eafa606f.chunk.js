"use strict";(self.webpackChunkbaden_baden=self.webpackChunkbaden_baden||[]).push([[867],{53016:(e,i,t)=>{t.d(i,{Z:()=>n});t(72791);var l=t(2409),s=t(49389),a=t(80184);const n=e=>{let{label:i,name:t,required:n,required_text:r,warning:d}=e;return(0,a.jsx)(l.Z.Item,{label:d?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:i}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{children:d})]}):(0,a.jsx)("div",{children:i}),name:t,rules:[{required:n,message:r}],children:(0,a.jsx)(s.default,{})})}},83386:(e,i,t)=>{t.d(i,{Z:()=>n});t(72791);var l=t(2409),s=t(66920),a=t(80184);const n=e=>{let{label:i,name:t,required:n,required_text:r}=e;return(0,a.jsx)(l.Z.Item,{label:i,name:t,rules:[{required:n,message:r}],children:(0,a.jsx)(s.Z,{rows:4})})}},52867:(e,i,t)=>{t.r(i),t.d(i,{default:()=>j});var l=t(72791),s=t(2409),a=t(50419),n=t(66106),r=t(30914),d=t(83734),u=t(93086),o=t(87309),c=t(91933),m=t(27169),_=t(72018),v=t(57689),g=t(16030),x=t(68117),b=t(77221),p=t(53016),h=t(83386),f=t(80184);const Z={index_image:[],inner_image:[],is_index:!1,title_uz:"",title_ru:"",title_en:"",sub_title_ru:"",sub_title_uz:"",sub_title_en:""},j=()=>{const[e]=s.Z.useForm(),i=(0,v.s0)(),{editId:t}=(0,g.v9)((e=>e.editData)),j=(0,g.I0)(),[S,w]=(0,l.useState)([]),[q,F]=(0,l.useState)([]),[y,I]=(0,l.useState)(""),{mutate:z,data:E,isLoading:P,isSuccess:D}=(0,c.useMutation)((e=>{let{url:i,formData:t}=e;return m.Z.postData(i,t)}),{onSuccess:()=>{a.ZP.success("Success")},onError:e=>{for(let i in e.response.data)a.ZP.error("".concat(i,": ").concat(e.response.data[i][0]))}}),{mutate:L,data:V,isLoading:k,isSuccess:C}=(0,c.useMutation)((e=>{let{url:i,data:t}=e;return m.Z.postData(i,t)}),{onSuccess:()=>{a.ZP.success("Success")},onError:e=>{for(let i in e.response.data)a.ZP.error("".concat(i,": ").concat(e.response.data[i][0]))}}),{isLoading:T,data:U,refetch:M,isSuccess:O}=(0,c.useQuery)(["edit-facilities",t],(()=>m.Z.getDataByID("/about/about-facilities",t)),{enabled:!1}),{mutate:R,isLoading:A,data:Q,isSuccess:J}=(0,c.useMutation)((e=>{let{url:i,data:t,id:l}=e;return m.Z.editData(i,t,l)}),{onSuccess:()=>{a.ZP.success("Success")},onError:e=>{for(let i in e.response.data)a.ZP.error("".concat(i,": ").concat(e.response.data[i][0]))}}),{mutate:N}=(0,c.useMutation)((e=>{let{url:i,ids:t}=e;return m.Z.deleteImages(i,t)}),{onSuccess:()=>a.ZP.success("Success"),onError:e=>a.ZP.error(e.message)});(0,l.useEffect)((()=>{J&&j({type:b.Pb,payload:""}),(C||J)&&i("/facilities")}),[V,Q]),(0,l.useEffect)((()=>{""!==t&&M()}),[t]),(0,l.useEffect)((()=>{""===t&&e.setFieldsValue(Z)}),[]),(0,l.useEffect)((()=>{var i,t,l,s,a,n;const r=[{uid:null===U||void 0===U||null===(i=U.inner_image)||void 0===i?void 0:i.id,name:null===U||void 0===U||null===(t=U.inner_image)||void 0===t?void 0:t.id,status:"done",url:null===U||void 0===U||null===(l=U.inner_image)||void 0===l?void 0:l.image}],d=[{uid:null===U||void 0===U||null===(s=U.index_image)||void 0===s?void 0:s.id,name:null===U||void 0===U||null===(a=U.index_image)||void 0===a?void 0:a.id,status:"done",url:null===U||void 0===U||null===(n=U.index_image)||void 0===n?void 0:n.image}];if(O){const i={title_uz:null===U||void 0===U?void 0:U.title_uz,title_ru:null===U||void 0===U?void 0:U.title_ru,title_en:null===U||void 0===U?void 0:U.title_en,sub_title_ru:null===U||void 0===U?void 0:U.sub_title_ru,sub_title_uz:null===U||void 0===U?void 0:U.sub_title_uz,sub_title_en:null===U||void 0===U?void 0:U.sub_title_en,inner_image:r,index_image:d,is_index:null===U||void 0===U?void 0:U.is_index};w(r),F(d),e.setFieldsValue(i)}}),[U]);(0,l.useEffect)((()=>{const i=JSON.parse(localStorage.getItem("myFormValues"));i&&(i.images=[],e.setFieldsValue(i));const t=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",t),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",t)}}),[]),(0,l.useEffect)((()=>{if(D&&"inner"===y){var i,t,l;const s=[{uid:null===E||void 0===E||null===(i=E.images[0])||void 0===i?void 0:i.id,name:null===E||void 0===E||null===(t=E.images[0])||void 0===t?void 0:t.id,status:"done",url:null===E||void 0===E||null===(l=E.images[0])||void 0===l?void 0:l.url}];return e.setFieldsValue({inner_image:s}),w(s),void I("")}if(D&&"index"===y){var s,a,n;const i=[{uid:null===E||void 0===E||null===(s=E.images[0])||void 0===s?void 0:s.id,name:null===E||void 0===E||null===(a=E.images[0])||void 0===a?void 0:a.id,status:"done",url:null===E||void 0===E||null===(n=E.images[0])||void 0===n?void 0:n.url}];return e.setFieldsValue({index_image:i}),F(i),void I("")}}),[E]);const B=async e=>{let i=e.url;i||(i=await new Promise((i=>{const t=new FileReader;t.readAsDataURL(e.originFileObj),t.onload=()=>i(t.result)})));const t=new Image;t.src=i;const l=window.open(i);null===l||void 0===l||l.document.write(t.outerHTML)},H=(0,l.useMemo)((()=>[{value:!0,label:"\u0412 \u043f\u0440\u043e\u0434\u0430\u0436\u0435"},{value:!1,label:"\u041d\u0435\u0442 \u0432 \u043f\u0440\u043e\u0434\u0430\u0436\u0435"}]),[]);return(0,f.jsx)("div",{children:k||T||A||P?(0,f.jsx)(_.QP,{}):(0,f.jsxs)(s.Z,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:Z,onFinish:e=>{var i,l;const s={inner_image:null===(i=S[0])||void 0===i?void 0:i.uid,index_image:null===(l=q[0])||void 0===l?void 0:l.uid,title_uz:e.title_uz,title_ru:e.title_ru,title_en:e.title_en,sub_title_ru:e.sub_title_ru,sub_title_uz:e.sub_title_uz,sub_title_en:e.sub_title_en,is_index:e.is_index};O?R({url:"about/about-facilities",data:s,id:t}):L({url:"about/about-facilities/",data:s})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(r.Z,{span:24,children:(0,f.jsx)(p.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"title_ru"})}),(0,f.jsx)(r.Z,{span:24,children:(0,f.jsx)(p.Z,{required:!0,required_text:"Sarlavha kiritish kerak",label:"Sarlavha Uz",name:"title_uz"})}),(0,f.jsx)(r.Z,{span:24,children:(0,f.jsx)(p.Z,{required:!0,required_text:"A title is required",label:"Title En",name:"title_en"})})]}),(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(r.Z,{span:24,children:(0,f.jsx)(h.Z,{required:!0,required_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",label:"\u041f\u043e\u0434\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a Ru",name:"sub_title_ru"})}),(0,f.jsx)(r.Z,{span:24,children:(0,f.jsx)(h.Z,{required:!0,required_text:"Tavsifi kiritish kerak",label:"Qo'shimcha Sarlavha Uz",name:"sub_title_uz"})}),(0,f.jsx)(r.Z,{span:24,children:(0,f.jsx)(h.Z,{required:!0,required_text:"A description must be entered",label:"Sub Title En",name:"sub_title_en"})}),(0,f.jsx)(r.Z,{span:24,children:(0,f.jsx)(s.Z.Item,{label:"\u0414\u043e\u043b\u0436\u043d\u0430 \u043b\u0438 \u044d\u0442\u0430 \u0443\u0441\u043b\u0443\u0433\u0430 \u043f\u043e\u044f\u0432\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435?",name:"is_index",rules:[{required:!0,message:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u044b\u0431\u0440\u0430\u0442\u044c"}],wrapperCol:{span:24},children:(0,f.jsx)(d.default,{style:{width:"100%"},placeholder:"",optionLabelProp:"label",options:H})})})]}),(0,f.jsxs)(n.Z,{gutter:20,children:[(0,f.jsx)(r.Z,{span:12,children:(0,f.jsx)(s.Z.Item,{label:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439",name:"inner_image",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0439"}],children:(0,f.jsx)(x.Z,{children:(0,f.jsx)(u.Z,{maxCount:1,fileList:S,listType:"picture-card",onChange:i=>{let{fileList:t}=i;if(0!==S.length||0===t.length){var l;e.setFieldsValue({inner_image:[]});const i=[null===(l=S[0])||void 0===l?void 0:l.uid];N({url:"about/images/delete",ids:{image_ids:i}}),w([])}const s=new FormData;0!==t.length&&(s.append("uploaded_images",t[0].originFileObj),z({url:"/about/images/",formData:s}),I("inner"))},onPreview:B,beforeUpload:()=>!1,children:S.length>0?"":"Upload"})})})}),(0,f.jsx)(r.Z,{span:12,children:(0,f.jsx)(s.Z.Item,{label:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0434\u043b\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u043e\u043a",name:"index_image",rules:[{required:!0,message:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}],children:(0,f.jsx)(x.Z,{children:(0,f.jsx)(u.Z,{maxCount:1,fileList:q,listType:"picture-card",onChange:i=>{let{fileList:t}=i;if(0!==q.length||0===t.length){var l;e.setFieldsValue({index_image:[]});const i=[null===(l=q[0])||void 0===l?void 0:l.uid];N({url:"about/images/delete",ids:{image_ids:i}}),F([])}const s=new FormData;0!==t.length&&(s.append("uploaded_images",t[0].originFileObj),z({url:"/about/images/",formData:s}),I("index"))},onPreview:B,beforeUpload:()=>!1,children:q.length>0?"":"Upload"})})})})]}),(0,f.jsx)(o.Z,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:O?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})})}}}]);
//# sourceMappingURL=867.eafa606f.chunk.js.map